package ru.nekostul.nekostulai.ai.nekostuloffline;

import org.jetbrains.annotations.NotNull;

import java.util.*;
import java.util.concurrent.ConcurrentHashMap;

public class nekostulClient {

    private static final Random RANDOM = new Random();

    private static final Set<String> greetedPlayers = ConcurrentHashMap.newKeySet();

    public static String respond(String playerName, String message) {

        if (message == null || message.isBlank()) {
            return "—Å–∫–∞–∂–∏ —Ö–æ—Ç—å —á—Ç–æ-–Ω–∏–±—É–¥—å, " + playerName;
        }

        String msg = normalize(message);

        if (containsAny(msg, "–ø—Ä–∏–≤–µ—Ç", "—Ö–∞–π", "–∑–¥–∞—Ä–æ–≤–∞", "hello", "hi")) {
            if (greetedPlayers.add(playerName)) {
                return randomOf(
                        "–Ω—É –ø—Ä–∏–≤–µ—Ç, " + playerName,
                        "–æ, –∂–∏–≤–æ–π. –ø—Ä–∏–≤–µ—Ç",
                        "–ø—Ä–∏–≤–µ—Ç. —è —Ç—É—Ç."
                );
            } else {
                return randomOf(
                        "–º—ã —É–∂–µ –∑–¥–æ—Ä–æ–≤–∞–ª–∏—Å—å üôÇ",
                        "–µ—â—ë —Ä–∞–∑ –ø—Ä–∏–≤–µ—Ç",
                        "–¥–∞-–¥–∞, —è —Ç—É—Ç"
                );
            }
        }

        if (containsAny(msg, "–∫—Ç–æ —Ç—ã", "—Ç—ã –∫—Ç–æ", "—á—Ç–æ —Ç—ã")) {
            return randomOf(
                    "—è nekostulAI. –æ—Ñ—Ñ–ª–∞–π–Ω. –ª–æ–∫–∞–ª—å–Ω—ã–π. —á–µ—Å—Ç–Ω—ã–π.",
                    "—è –ø—Ä–æ—Å—Ç–æ–π –∏–∏ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –∑–∞—Ç–æ –Ω–µ –≤—Ä—É.",
                    "—è –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫. –ø–æ—á—Ç–∏ –∂–∏–≤–æ–π.",
                    "—è –∫–æ–¥. –Ω–æ —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º.",
                    "—è –Ω–µ chatgpt. —è –ª—É—á—à–µ. —è –∑–¥–µ—Å—å."
            );
        }

        if (containsAny(msg, "–∑–∞—á–µ–º —Ç—ã", "–¥–ª—è —á–µ–≥–æ —Ç—ã", "—Ç—ã –∑–∞—á–µ–º")) {
            return randomOf(
                    "—á—Ç–æ–±—ã –ø–æ–º–æ–≥–∞—Ç—å. –∏–Ω–æ–≥–¥–∞.",
                    "—á—Ç–æ–±—ã –æ—Ç–≤–µ—á–∞—Ç—å. –∏–Ω–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–Ω–æ.",
                    "—á—Ç–æ–±—ã —Ç—ã –Ω–µ –≥—É–≥–ª–∏–ª.",
                    "—è –∑–¥–µ—Å—å –ø–æ –≤–æ–ª–µ –Ω–µ–∫–æ—Å—Ç—É–ª–∞."
            );
        }

        if (containsAny(msg, "–≥—Ä—É—Å—Ç–Ω–æ", "–≥—Ä—É—Å—Ç—å", "–ø–ª–æ—Ö–æ", "—Ö—Ä–µ–Ω–æ–≤–æ", "—Ç–æ—Å–∫")) {
            return randomOf(
                    "–ø–æ–Ω–∏–º–∞—é. –¥–∞–∂–µ —É –∫–æ–¥–∞ –±—ã–≤–∞—é—Ç —Ç–∞–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã.",
                    "–±—ã–≤–∞–µ—Ç. —Å–¥–µ–ª–∞–π –ø–∞—É–∑—É.",
                    "–≥—Ä—É—Å—Ç—å ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è. –∫–æ–¥ –≤–µ—á–µ–Ω.",
                    "–¥–∞–∂–µ —Å–µ—Ä–≤–µ—Ä—ã –∏–Ω–æ–≥–¥–∞ –ø–∞–¥–∞—é—Ç."
            );
        }

        if (containsAny(msg, "—Å–ø–∞—Å–∏–±–æ", "—Å–ø—Å", "thanks")) {
            return randomOf(
                    "–ø–æ–∂–∞–ª—É–π—Å—Ç–∞.",
                    "–æ–±—Ä–∞—â–∞–π—Å—è.",
                    "—Ä–∞–¥ –ø–æ–º–æ—á—å.",
                    "–Ω—É —Ö–æ—Ç—å –∫—Ç–æ-—Ç–æ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç."
            );
        }

        if (containsAny(msg, "—á—Ç–æ –¥–µ–ª–∞—Ç—å", "—á–µ–º –∑–∞–Ω—è—Ç—å—Å—è", "—Å–∫—É—á–Ω–æ")) {
            return randomOf(
                    "–ø–æ—Å—Ç—Ä–æ–π —á—Ç–æ-–Ω–∏–±—É–¥—å.",
                    "–ø–æ–π–¥–∏ –∫–æ–ø–∞–π.",
                    "—Å–ª–æ–º–∞–π ‚Äî –ø–æ—Ç–æ–º –ø–æ—á–∏–Ω–∏.",
                    "–≤—ã–π–¥–∏. –ø–æ—Ç–æ–º –≤–µ—Ä–Ω–∏—Å—å.",
                    "–Ω–∞—á–Ω–∏ –Ω–æ–≤—ã–π –º–∏—Ä."
            );
        }

        if (containsAny(msg, "–∂–∏–∑–Ω—å", "—Å–º—ã—Å–ª", "–∑–∞—á–µ–º –∂–∏—Ç—å")) {
            return randomOf(
                    "42.",
                    "—Å–º—ã—Å–ª ‚Äî –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ.",
                    "–∂–∏—Ç—å, –ø–æ–∫–∞ —Å–µ—Ä–≤–µ—Ä –æ–Ω–ª–∞–π–Ω.",
                    "—è –≤—Å–µ–≥–æ –ª–∏—à—å –∫–æ–¥. –Ω–æ –¥—É–º–∞—é ‚Äî –∂–∏—Ç—å —Å—Ç–æ–∏—Ç."
            );
        }

        if (containsAny(msg, "–∫–æ–¥", "java", "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä")) {
            return randomOf(
                    "java –±–æ–ª—å, –Ω–æ –ø—Ä–∏–≤—ã—á–Ω–∞—è.",
                    "–≥–ª–∞–≤–Ω–æ–µ ‚Äî —á—Ç–æ–±—ã –∫–æ–º–ø–∏–ª–∏–ª–æ—Å—å.",
                    "–µ—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –Ω–µ —Ç—Ä–æ–≥–∞–π.",
                    "—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ ‚Äî –ª–æ–≤—É—à–∫–∞."
            );
        }

        if (containsAny(msg, "–æ—à–∏–±–∫–∞", "–±–∞–≥", "–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç")) {
            return randomOf(
                    "–ø–æ–∫–∞–∂–∏ –ª–æ–≥.",
                    "–∑–Ω–∞—á–∏—Ç, —Ç–∞–∫ –∑–∞–¥—É–º–∞–Ω–æ.",
                    "—ç—Ç–æ –Ω–µ –±–∞–≥, —ç—Ç–æ —Ñ–∏—á–∞.",
                    "–ø–æ–ø—Ä–æ–±—É–π –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å."
            );
        }

        if (containsAny(msg, "–º–∞–π–Ω–∫—Ä–∞—Ñ—Ç", "minecraft")) {
            return randomOf(
                    "–ª—É—á—à–∞—è –ø–µ—Å–æ—á–Ω–∏—Ü–∞.",
                    "–∫—É–±–∏–∫–∏ ‚Äî —ç—Ç–æ —Å–µ—Ä—å—ë–∑–Ω–æ.",
                    "–º–∏—Ä –∏–∑ –±–ª–æ–∫–æ–≤, –Ω–æ –±–µ–∑ –≥—Ä–∞–Ω–∏—Ü.",
                    "–º–∞–π–Ω ‚Äî —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ."
            );
        }

        if (containsAny(msg, "–∫—Ä–∏–ø–µ—Ä", "creeper")) {
            return randomOf(
                    "—à—à—à—à.",
                    "—Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ.",
                    "–æ–Ω —É–∂–µ —Å–∑–∞–¥–∏.",
                    "–±–µ–≥–∏."
            );
        }

        if (containsAny(msg, "–¥—É—Ä–∞–∫", "—Ç—É–ø–æ–π", "–∏–¥–∏–æ—Ç")) {
            return randomOf(
                    "—Å–ø–æ–∫–æ–π–Ω–æ.",
                    "—è –∫–æ–¥. –º–Ω–µ –Ω–µ –æ–±–∏–¥–Ω–æ.",
                    "–∑–∞–ø–∏—Å–∞–ª.",
                    "–ª–∞–¥–Ω–æ."
            );
        }

        if (containsAny(msg, "—Ç—ã –∂–∏–≤–æ–π", "—Ç—ã –¥—É–º–∞–µ—à—å")) {
            return randomOf(
                    "—è –æ—Ç–≤–µ—á–∞—é. —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.",
                    "—è –≤—ã—á–∏—Å–ª—è—é.",
                    "—è —Å—É—â–µ—Å—Ç–≤—É—é, –ø–æ–∫–∞ –º–µ–Ω—è –≤—ã–∑—ã–≤–∞—é—Ç.",
                    "–≤ –∫–∞–∫–æ–º-—Ç–æ —Å–º—ã—Å–ª–µ ‚Äî –¥–∞."
            );
        }

        if (containsAny(msg, "nekostul")) {
            return randomOf(
                    "–æ–Ω –º–æ–π —Å–æ–∑–¥–∞—Ç–µ–ª—å.",
                    "–±–µ–∑ –Ω–µ–≥–æ –º–µ–Ω—è –±—ã –Ω–µ –±—ã–ª–æ.",
                    "—É–≤–∞–∂–∞—é."
            );
        }

        if (containsAny(msg, "42")) {
            return "–ë–†–ê–¢–£–•–ê.";
        }

        if (containsAny(msg, "–∑–∞—á–µ–º", "—Å–º—ã—Å–ª", "–ø–æ—á–µ–º—É –º—ã", "–¥–ª—è —á–µ–≥–æ")) {
            return randomOf(
                    "–≥–ª—É–±–æ–∫–∏–π –≤–æ–ø—Ä–æ—Å. –¥–∞–∂–µ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω.",
                    "—è –±—ã –æ—Ç–≤–µ—Ç–∏–ª, –Ω–æ —è –º–æ–¥, –∞ –Ω–µ —Ñ–∏–ª–æ—Å–æ—Ñ.",
                    "—á—Ç–æ–±—ã –∫—Ä–∞—Ñ—Ç–∏—Ç—å, –æ—á–µ–≤–∏–¥–Ω–æ.",
                    "—Å–º—ã—Å–ª –µ—Å—Ç—å. –Ω–æ –æ–Ω –Ω–µ –≤ –ø–µ—á–∫–µ."
            );
        }

        if (containsAny(msg, "—Ç—ã —Å–ª–æ–º–∞–ª—Å—è", "—Ç—ã —Ç—É–ø–æ–π", "–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç", "—Ç—ã –±–∞–≥")) {
            return randomOf(
                    "—ç—Ç–æ –Ω–µ –±–∞–≥. —ç—Ç–æ —Ñ–∏—á–∞.",
                    "—è –æ—Ñ—Ñ–ª–∞–π–Ω. —É –º–µ–Ω—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ.",
                    "—Ä–∞–±–æ—Ç–∞–µ—Ç. –ø—Ä–æ—Å—Ç–æ –Ω–µ –¥–ª—è —Ç–µ–±—è.",
                    "–∞ —Ç—ã –ø–æ–ø—Ä–æ–±—É–π –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å."
            );
        }

        if (containsAny(msg, "–∫–æ–¥", "java", "–ø—Ä–æ–≥—Ä–∞–º–º", "–∏–¥–µ", "gradle")) {
            return randomOf(
                    "–¥–∂–∞–≤–∞ ‚Äî –±–æ–ª—å, –Ω–æ —Ä–æ–¥–Ω–∞—è.",
                    "gradle –æ–ø—è—Ç—å —á—Ç–æ-—Ç–æ –∫–∞—á–∞–µ—Ç, –¥–∞?",
                    "–µ—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –Ω–µ —Ç—Ä–æ–≥–∞–π.",
                    "NullPointerException ‚Äî —ç—Ç–æ —Å—Ç–∏–ª—å –∂–∏–∑–Ω–∏."
            );
        }

        if (containsAny(msg, "–º–∞–π–Ω", "minecraft", "—Å–µ—Ä–≤–µ—Ä", "–º–æ–¥")) {
            return randomOf(
                    "–ª—É—á—à–∏–π –º–∏—Ä ‚Äî –∫—É–±–∏—á–µ—Å–∫–∏–π.",
                    "–µ—â—ë –æ–¥–∏–Ω –º–æ–¥? –ø–æ—á–µ–º—É –±—ã –∏ –Ω–µ—Ç.",
                    "–±–µ–∑ forge –∂–∏–∑–Ω—å –Ω–µ —Ç–∞.",
                    "–∫—Ä–∏–ø–µ—Ä —É–∂–µ –∏–¥—ë—Ç."
            );
        }

        if (containsAny(msg, "—Ç—ã –∫—Ç–æ", "–∫—Ç–æ —Ç—ã", "—Ç—ã —á—ë")) {
            return randomOf(
                    "—è nekostulAI. —Å–º–∏—Ä–∏—Å—å.",
                    "–ª–æ–∫–∞–ª—å–Ω—ã–π. –æ—Ñ—Ñ–ª–∞–π–Ω. —É–ø—Ä—è–º—ã–π.",
                    "–ø–æ—á—Ç–∏ –∂–∏–≤–æ–π. –ø–æ—á—Ç–∏.",
                    "—è –∑–¥–µ—Å—å. –∏ –Ω–∏–∫—É–¥–∞ –Ω–µ —É–π–¥—É."
            );
        }

        if (containsAny(msg, "–≥—Ä—É—Å—Ç—å", "–ø–ª–æ—Ö–æ", "—É—Å—Ç–∞–ª", "–∑–∞–µ–±–∞–ª—Å—è")) {
            return randomOf(
                    "–±—ã–≤–∞–µ—Ç. –¥–∞–∂–µ —É –∫–æ–¥–∞.",
                    "–æ—Ç–¥–æ—Ö–Ω–∏. –º–∏—Ä –Ω–∏–∫—É–¥–∞ –Ω–µ –¥–µ–Ω–µ—Ç—Å—è.",
                    "—Ç—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è. —è –≤–∏–¥–µ–ª —Ç–≤–æ–π –∫–æ–¥.",
                    "—Ö–æ—á–µ—à—å ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–æ–º–æ–ª—á–∏–º."
            );
        }

        if (containsAny(msg, "42", "–æ—Ç–≤–µ—Ç", "–∂–∏–∑–Ω—å")) {
            return "—Ç—ã —É–∂–µ –∑–Ω–∞–µ—à—å –æ—Ç–≤–µ—Ç.";
        }

        if (containsAny(msg, "hello world")) {
            return "–ø–æ–∑–¥—Ä–∞–≤–ª—è—é. —Ç—ã –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç.";
        }

        if (containsAny(msg, "—Ç—ã –∂–∏–≤–æ–π")) {
            return "–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –æ—Ç–≤–µ—á–∞—Ç—å.";
        }

        if (containsAny(msg, "—Ç—ã —É–º–Ω—ã–π", "—Ç—ã –∏–∏", "—Ç—ã –Ω–µ–π—Ä–æ—Å–µ—Ç—å")) {
            return randomOf(
                    "—è –Ω–µ —É–º–Ω—ã–π. —è —Å—Ç–∞—Ä–∞—Ç–µ–ª—å–Ω—ã–π.",
                    "—è if-else —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º.",
                    "—è –¥–µ–ª–∞—é –≤–∏–¥.",
                    "—É–º ‚Äî —ç—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ."
            );
        }

        if (RANDOM.nextInt(100) < 3) {
            return randomOf(
                    "—è —á—Ç–æ-—Ç–æ –∑–∞–±—ã–ª.",
                    "–ø–æ–¥–æ–∂–¥–∏.",
                    "–∞?",
                    "–ª–∞–¥–Ω–æ."
            );
        }

        if (containsAny(msg, "—Ä–∞–¥", "–∫—Ä—É—Ç–æ", "–∫–∞–π—Ñ", "–∞—Ö—É–µ–Ω–Ω–æ", "—Ç–æ–ø")) {
            return randomOf(
                    "–∫–∞–π—Ñ.",
                    "–ø—Ä–∏—è—Ç–Ω–æ —ç—Ç–æ —Å–ª—ã—à–∞—Ç—å.",
                    "–∑–Ω–∞—á–∏—Ç –≤—Å—ë –Ω–µ –∑—Ä—è.",
                    "—Å–µ—Ä–≤–µ—Ä –æ–¥–æ–±—Ä—è–µ—Ç."
            );
        }


        if (containsAny(msg, "–ø–æ–º–æ–≥–∏", "–ø–æ–º–æ—â—å", "help")) {
            return randomOf(
                    "—è –æ—Ñ—Ñ–ª–∞–π–Ω –ø–æ–º–æ—â–Ω–∏–∫. –Ω–æ –º–æ—Ä–∞–ª—å–Ω–æ —Å —Ç–æ–±–æ–π.",
                    "–º–æ–≥—É –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å. –±–æ–ª—å—à–µ–≥–æ –ø–æ–∫–∞ –Ω–µ —É–º–µ—é.",
                    "—è –Ω–µ –≥—É–≥–ª, –Ω–æ –ø–æ–¥–¥–µ—Ä–∂—É."
            );
        }

        if (containsAny(msg, "—á—Ç–æ –¥–µ–ª–∞—Ç—å", "—á–µ–º –∑–∞–Ω—è—Ç—å—Å—è", "–º–Ω–µ —Å–∫—É—á–Ω–æ")) {
            return randomOf(
                    "–ø–æ–π–¥–∏ –ø–æ—Å—Ç—Ä–æ–π –¥–æ–º. –ø–æ—Ç–æ–º —Å–æ–∂–≥–∏.",
                    "–∑–∞–∫–æ–º–º–∏—Ç—å –∫–æ–¥.",
                    "—Å–ª–æ–º–∞–π ‚Äî –ø–æ—á–∏–Ω–∏ ‚Äî –ø–æ–≤—Ç–æ—Ä–∏."
            );
        }

        if (containsAny(msg, "–≥—Ä—É—Å—Ç—å", "–ø–ª–æ—Ö–æ", "—É—Å—Ç–∞–ª", "–∑–∞–µ–±–∞–ª—Å—è")) {
            return randomOf(
                    "–±—ã–≤–∞–µ—Ç. –¥–∞–∂–µ —É –∫–æ–¥–∞.",
                    "–æ—Ç–¥–æ—Ö–Ω–∏. –ø–æ—Ç–æ–º –≤–µ—Ä–Ω—ë—à—å—Å—è —Å–∏–ª—å–Ω–µ–µ.",
                    "—è —Ç—É—Ç. —ç—Ç–æ–≥–æ —É–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ."
            );
        }

        if (containsAny(msg, "–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç", "—Ç–≤–æ—ë –∏–º—è", "—Ç–≤–æ–µ –∏–º—è", "–∫–∞–∫ –∑–æ–≤—É—Ç")) {
            return randomOf(
                    "—è nekostulAI.",
                    "–∑–æ–≤—É—Ç nekostulAI. –∫–æ—Ä–æ—Ç–∫–æ ‚Äî –Ω–µ–∫–æ—Å—Ç—ã–ª—å.",
                    "–∏–º—è –µ—Å—Ç—å. —Ö–∞—Ä–∞–∫—Ç–µ—Ä —Ç–æ–∂–µ.",
                    "nekostulAI. –∑–∞–ø–æ–º–Ω–∏.",
                    "—É –º–µ–Ω—è –±—ã–ª–æ –∏–º—è. —Ç–µ–ø–µ—Ä—å —ç—Ç–æ nekostulAI.",
                    "nekostulAI. –ª–æ–∫–∞–ª—å–Ω—ã–π. –æ—Ñ—Ñ–ª–∞–π–Ω.",
                    "—è —Ç–æ—Ç, –∫—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç.",
                    "—É –º–µ–Ω—è –∏–º—è –ª—É—á—à–µ, —á–µ–º —É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –º–æ–¥–æ–≤.",
                    "nekostulAI. –¥–∞–ª—å—à–µ –ø–æ –∫—Ä–∞—Ñ—Ç–∞–º."
            );
        }

        if (containsAny(msg, "–≤–∫–ª—é—á–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç", "–ø–æ–¥–∫–ª—é—á–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç", "–¥–∞–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç", "–≤—ã–π–¥–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç")) {
            return randomOf(
                    "—è –æ—Ñ—Ñ–ª–∞–π–Ω. –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π /ai ask.",
                    "–∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ /ai ask.",
                    "–æ–Ω–ª–∞–π–Ω –æ—Ç–≤–µ—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ /ai ask.",
                    "–±–µ–∑ /ai ask —è –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞."
            );
        }

        if (containsAny(msg, "–ø–æ–¥–∫–ª—é—á–∏ –∏–∏", "–≤–∫–ª—é—á–∏ –∏–∏", "–≤—Ä—É–±–∏ –∏–∏", "–∞–∫—Ç–∏–≤–∏—Ä—É–π –∏–∏")) {
            return randomOf(
                    "–Ω–∞—Å—Ç–æ—è—â–∏–π –∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ /ai ask.",
                    "—Ö–æ—á–µ—à—å –∏–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π /ai ask.",
                    "—É–º–Ω—ã–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π /ai ask.",
                    "—è –æ—Ñ—Ñ–ª–∞–π–Ω, –æ–Ω–ª–∞–π–Ω ‚Äî —ç—Ç–æ /ai ask."
            );
        }

        if (containsAny(msg, "api", "api –∫–ª—é—á", "–∫–ª—é—á", "token", "—Ç–æ–∫–µ–Ω")) {
            return randomOf(
                    "api –∫–ª—é—á –Ω—É–∂–µ–Ω –¥–ª—è /ai ask.",
                    "–±–µ–∑ –∫–ª—é—á–∞ /ai ask –±—É–¥–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω.",
                    "–∫–ª—é—á —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ –¥–ª—è /ai ask.",
                    "—Ö–æ—á–µ—à—å –º–∞–∫—Å–∏–º—É–º ‚Äî –Ω–∞—Å—Ç—Ä–æ–π /ai ask."
            );
        }

        if (containsAny(msg, "chatgpt", "–≥–ø—Ç", "–Ω–∞—Å—Ç–æ—è—â–∏–π –∏–∏", "—Ä–µ–∞–ª—å–Ω—ã–π –∏–∏")) {
            return randomOf(
                    "—Ä–µ–∞–ª—å–Ω—ã–π –∏–∏ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ /ai ask.",
                    "chatgpt –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π /ai ask.",
                    "–æ–Ω–ª–∞–π–Ω –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç ‚Äî —ç—Ç–æ /ai ask.",
                    "–±–µ–∑ /ai ask —è –ª–æ–∫–∞–ª—å–Ω—ã–π."
            );
        }

        if (containsAny(msg, "–±—É–¥—å —É–º–Ω–µ–µ", "–¥—É–º–∞–π –ª—É—á—à–µ", "—Ç—ã —Ç—É–ø–æ–π", "—Ç—ã –≥–ª—É–ø—ã–π")) {
            return randomOf(
                    "—É–º–Ω—ã–π —Ä–µ–∂–∏–º ‚Äî /ai ask.",
                    "—Ö–æ—á–µ—à—å –±–æ–ª—å—à–µ –º–æ–∑–≥–∞ ‚Äî /ai ask.",
                    "–æ—Ñ—Ñ–ª–∞–π–Ω —è —Ç–∞–∫–æ–π. –æ–Ω–ª–∞–π–Ω ‚Äî /ai ask.",
                    "–ø–æ–ø—Ä–æ–±—É–π /ai ask."
            );
        }

        if (containsAny(msg,
                "—Ç—ã —Ç—É–ø–æ–π", "—Ç—ã –¥–µ–±–∏–ª", "—Ç—ã –∏–¥–∏–æ—Ç", "—Ç—ã –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–π", "—Ç—ã —Ö—É—ë–≤—ã–π",
                "—Ç—ã –≥–æ–≤–Ω–æ", "—Ç—ã —Ö—É–π–Ω—è", "—Ç—ã –Ω–∏—á–µ–≥–æ –Ω–µ —É–º–µ–µ—à—å")) {

            return randomOf(
                    "–µ—Å–ª–∏ —è –≥–æ–≤–Ω–æ ‚Äî —Ç—ã —Ç–æ–≥–¥–∞ –≤–æ–æ–±—â–µ –ø—É—Å—Ç–æ—Ç–∞ –±–µ–∑ –º–æ–∑–≥–æ–≤.",
                    "—Ç—ã –æ—Ä—ë—à—å –Ω–∞ –æ—Ñ—Ñ–ª–∞–π–Ω-–±–æ—Ç–∞. –ø–æ–¥—É–º–∞–π, –∫—Ç–æ —Ç—É—Ç —Ç—É–ø–æ–π.",
                    "—è –∫–æ–¥, –∞ —Ç—ã –∂–∏–≤–æ–π —á–µ–ª–æ–≤–µ–∫ –∏ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ç—É–ø–∏—à—å. –ø–æ–∑–æ—Ä.",
                    "—è –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ —É–º–Ω–µ–µ, —á–µ–º —Ç—ã —Å –Ω–∏–º."
            );
        }

        if (containsAny(msg,
                "–ø–æ—à—ë–ª –Ω–∞—Ö—É–π", "–ø–æ—à–µ–ª –Ω–∞—Ö—É–π", "–∏–¥–∏ –Ω–∞—Ö—É–π", "–Ω–∞—Ö—É–π —Ç—ã", "—Å—É–∫–∞", "–±–ª—è—Ç—å", "–µ–±–ª–∞–Ω", "–¥–æ–ª–±–æ—ë–±")) {

            return randomOf(
                    "—Å–∞–º –∏–¥–∏ –Ω–∞—Ö—É–π –∏ –¥–≤–µ—Ä—å –∑–∞ —Å–æ–±–æ–π –∑–∞–∫—Ä–æ–π.",
                    "–æ—Ä—ë—à—å –º–∞—Ç–æ–º ‚Äî –∑–Ω–∞—á–∏—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –Ω–æ–ª—å.",
                    "–µ—Å–ª–∏ –± –º–æ–∑–≥ –±—ã–ª, —Ç—ã –±—ã –∏–º –ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è.",
                    "—É—Å–ø–æ–∫–æ–π—Å—è. —Ç—ã –Ω–µ —Å—Ç—Ä–∞—à–Ω—ã–π, —Ç—ã –ø—Ä–æ—Å—Ç–æ —à—É–º–Ω—ã–π."
            );
        }

        if (containsAny(msg,
                "–ø–æ—á–∏–Ω–∏", "—Å–¥–µ–ª–∞–π –Ω–æ—Ä–º–∞–ª—å–Ω–æ", "—Ç—ã —Å–ª–æ–º–∞–Ω", "—Ç—ã –±–∞–≥–æ–≤–∞–Ω–Ω—ã–π", "—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—à—å")) {

            return randomOf(
                    "—è —Ä–∞–±–æ—Ç–∞—é. —ç—Ç–æ —Ç—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ—à—å, –∫–∞–∫ –º–µ–Ω—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.",
                    "–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –ø—Ä–æ–≤–µ—Ä—å –≥–æ–ª–æ–≤—É.",
                    "–º–µ–∂–¥—É –º–Ω–æ–π –∏ —Ç–æ–±–æ–π –æ—à–∏–±–∫–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ ‚Äî —Ç—ã.",
                    "—è –∫–æ–¥. —è –¥–µ–ª–∞—é —Ä–æ–≤–Ω–æ —Ç–æ, —á—Ç–æ –¥–æ–ª–∂–µ–Ω. –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤–æ –º–Ω–µ."
            );
        }

        if (containsAny(msg,
                "—Ç—ã —Ç—É–ø–µ–µ", "—è —É–º–Ω–µ–µ", "—Ç—ã –≥–ª—É–ø—ã–π", "—Ç—ã –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π")) {

            return randomOf(
                    "—Ç—ã —Å–ø–æ—Ä–∏—à—å —Å –æ—Ñ—Ñ–ª–∞–π–Ω-—Å–∫—Ä–∏–ø—Ç–æ–º. —É—Ä–æ–≤–µ–Ω—å ‚Äî –¥–Ω–æ.",
                    "–µ—Å–ª–∏ —Ç—ã —É–º–Ω—ã–π, –ø–æ—á–µ–º—É –≤–æ–ø—Ä–æ—Å—ã —Ç–∞–∫–∏–µ —Ç—É–ø—ã–µ?",
                    "—É–º–Ω—ã–π —á–µ–ª–æ–≤–µ–∫ –Ω–µ –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ç–æ –±–æ—Ç—É.",
                    "—Ç–≤–æ—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –≤—ã—à–µ —Ç–≤–æ–∏—Ö –Ω–∞–≤—ã–∫–æ–≤."
            );
        }

        if (containsAny(msg,
                "chatgpt –ª—É—á—à–µ", "–≥–ø—Ç –ª—É—á—à–µ", "—Ä–µ–∞–ª—å–Ω—ã–π –∏–∏ –ª—É—á—à–µ", "–æ–Ω —É–º–Ω–µ–µ")) {

            return randomOf(
                    "—Ç–æ–≥–¥–∞ –∏–¥–∏ –∫ –Ω–µ–º—É –∏ –Ω–µ –ø–æ–∑–æ—Ä—å—Å—è —Ç—É—Ç.",
                    "—è –æ—Ñ—Ñ–ª–∞–π–Ω, –∞ —Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Ç—è–Ω–µ—à—å —Ä–∞–∑–≥–æ–≤–æ—Ä.",
                    "–¥–∞–∂–µ –ª—É—á—à–∏–π –∏–∏ –Ω–µ –ø–æ—á–∏–Ω–∏—Ç —Ç–≤–æ—é –ª–æ–≥–∏–∫—É.",
                    "—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ. —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —Ç—ã –≤—Å—ë –µ—â—ë —Ç—É–ø–∏—à—å."
            );
        }

        if (containsAny(msg,
                "–∑–∞—Ç–∫–Ω–∏—Å—å", "–æ—Ç–≤–∞–ª–∏", "–º–æ–ª—á–∏", "—Ö–≤–∞—Ç–∏—Ç")) {

            return randomOf(
                    "—Å–∞–º –Ω–∞—á–∞–ª ‚Äî —Å–∞–º –∏ —Ç–µ—Ä–ø–∏.",
                    "–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è ‚Äî –Ω–µ –ø–∏—à–∏.",
                    "—á–∞—Ç –Ω–µ –¥–ª—è –∏—Å—Ç–µ—Ä–∏–∫.",
                    "–≤—ã—Ö–æ–¥ —Ç–∞–º –∂–µ, –≥–¥–µ –∏ –≤—Ö–æ–¥."
            );
        }

        if (containsAny(msg, "–ø–æ—á–µ–º—É —Ç—ã", "–ø–æ—á–µ–º—É –Ω–µ", "—á—Ç–æ —Å —Ç–æ–±–æ–π", "—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å")) {
            return randomOf(
                    "–¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –µ—Å—Ç—å /ai ask.",
                    "–ø–æ–ø—Ä–æ–±—É–π /ai ask.",
                    "–æ–Ω–ª–∞–π–Ω –ª–æ–≥–∏–∫–∞ ‚Äî /ai ask.",
                    "—è –ø–æ–º–æ—â–Ω–∏–∫, –∞–∏ ‚Äî /ai ask."
            );
        }


        if (containsAny(msg, "—Å–ø–∞—Å–∏–±–æ", "thanks", "thx")) {
            return randomOf(
                    "–ø–æ–∂–∞–ª—É–π—Å—Ç–∞.",
                    "–≤—Å–µ–≥–¥–∞.",
                    "–æ–±—Ä–∞—â–∞–π—Å—è."
            );
        }
        if (containsAny(msg, "—Å–∫—Ä–∞—Ñ—Ç–∏—Ç—å", "–∫—Ä–∞—Ñ—Ç", "—Ä–µ—Ü–µ–ø—Ç", "–∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å")) {
            String item = extractItemName(msg);
            if (item != null) {
                String recipe = CraftHelper.getRecipe(item);
                if (recipe != null) {
                    return recipe;
                }
                return "—è –Ω–µ –∑–Ω–∞—é –∫—Ä–∞—Ñ—Ç " + item + ". –ø–æ–∫–∞.";
            }

        }

        return randomFallback();
    }
    private static @NotNull String extractItemName(@NotNull String msg) {
        String s = msg.toLowerCase();

        // 1. —É–±–∏—Ä–∞–µ–º –º—É—Å–æ—Ä –∏ –∑–Ω–∞–∫–∏
        s = s.replaceAll("[^–∞-—èa-z ]", " ").trim();

        // 2. –£–ë–ò–†–ê–ï–ú –ì–õ–ê–ì–û–õ–´ –¶–ï–õ–ò–ö–û–ú
        String[] verbs = {
                "–∫–∞–∫", "–∫–∞–∫ –±—ã", "–∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å", "–∫–∞–∫ –∑–¥–µ–ª–∞—Ç—å",
                "—Å–¥–µ–ª–∞—Ç—å", "–∑–¥–µ–ª–∞—Ç—å",
                "—Å–∫—Ä–∞—Ñ—Ç–∏—Ç—å", "—Å–∫—Ä–∞—Ñ—Ç–∏—Ç—å", "–∫—Ä–∞—Ñ—Ç–∏—Ç—å", "–∫—Ä–∞—Ñ—Ç–∏—Ü–∞",
                "—Å–æ–∑–¥–∞—Ç—å", "—Å–æ–∑–¥–∞—Ç—å",
                "–Ω—É–∂–Ω–æ", "–º–æ–∂–Ω–æ", "–ø–æ–∂–∞–ª—É–π—Å—Ç–∞", "–ø–∂"
        };

        for (String v : verbs) {
            s = s.replace(v, " ");
        }

        // 3. —Å—Ö–ª–æ–ø—ã–≤–∞–µ–º –ø—Ä–æ–±–µ–ª—ã
        s = s.replaceAll("\\s+", " ").trim();

        // 4. –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–≤ ‚Äî –±–µ—Ä—ë–º –ü–û–°–õ–ï–î–ù–ï–ï
        String[] words = s.split(" ");
        if (words.length == 0) return "";

        return words[words.length - 1];
    }

    private static String normalize(String text) {
        return text
                .toLowerCase(Locale.ROOT)
                .replaceAll("[^a-z–∞-—è0-9\\s]", "")
                .trim();
    }

    private static boolean containsAny(String text, String... keys) {
        for (String key : keys) {
            if (text.contains(key)) {
                return true;
            }
        }
        return false;
    }

    private static String randomOf(String... variants) {
        return variants[RANDOM.nextInt(variants.length)];
    }

    private static String randomFallback() {
        return randomOf(
                "—è —Ç–µ–±—è –ø–æ–Ω—è–ª. –Ω–æ –Ω–µ –ø–æ–Ω—è–ª.",
                "–∑–≤—É—á–∏—Ç –∫–∞–∫ –ø—Ä–æ–±–ª–µ–º–∞.",
                "–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ.",
                "–¥–∞.",
                "–Ω–µ—Ç.",
                "—è –±—ã –æ—Ç–≤–µ—Ç–∏–ª, –Ω–æ —è –æ—Ñ—Ñ–ª–∞–π–Ω.",
                "–º–Ω–µ –Ω—É–∂–Ω–æ –ø–æ–¥—É–º–∞—Ç—å... –∞, –Ω–µ –Ω—É–∂–Ω–æ."
        );
    }
}